<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Composer Prototype</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Output+Sans:wght@300;400;500;600;700&display=swap">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Output Sans', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      margin: 0;
      padding: 0;
      height: 100vh;
      overflow: hidden;
    }
    
    strong {
      font-weight: 600;
    }
    
    .composer-container {
      display: flex;
      flex-direction: column;
      height: 100vh;
      background-color: #F8FAFD;
    }
    
    .top-nav {
      background-color: #2C3142;
      color: #FFFFFF;
      padding: 12px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #1F2533;
    }
    
    .top-nav-left {
      display: flex;
      align-items: center;
      gap: 32px;
    }
    
    .logo-area {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .logo-circle {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background-color: #FFFFFF;
    }
    
    .nav-links {
      display: flex;
      gap: 24px;
    }
    
    .nav-link {
      color: #E0E3EE;
      text-decoration: none;
      font-size: 14px;
    }
    
    .top-nav-right {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .sandbox-badge {
      background-color: #F4C681;
      color: #692609;
      padding: 6px 16px;
      border-radius: 4px;
      font-size: 14px;
      font-weight: 500;
    }
    
    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background-color: #656A86;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 500;
    }
    
    .sub-header {
      background-color: #FFFFFF;
      padding: 12px 24px;
      border-bottom: 1px solid #E0E3EE;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .sub-header-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .sub-header-right {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .btn {
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      border: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn-icon {
      background: none;
      border: none;
      cursor: pointer;
      padding: 8px;
      color: #656A86;
    }
    
    .btn-neutral {
      background-color: #EFF1F6;
      color: #191B34;
    }
    
    .btn-primary {
      background-color: #1F3CD0;
      color: #FFFFFF;
    }
    
    .btn-publish {
      background-color: #656A86;
      color: #FFFFFF;
    }
    
    .tabs-container {
      background-color: #FFFFFF;
      padding: 0 24px;
      border-bottom: 1px solid #E0E3EE;
      display: flex;
      gap: 32px;
    }
    
    .tab {
      background: none;
      border: none;
      padding: 16px 0;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      color: #656A86;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
    }
    
    .tab.active {
      color: #1F3CD0;
      border-bottom: 2px solid #1F3CD0;
    }
    
    .main-content {
      display: flex;
      flex: 1;
      overflow: hidden;
    }
    
    .left-sidebar {
      width: 320px;
      background-color: #F8FAFD;
      border-right: 1px solid #E0E3EE;
      overflow-y: auto;
      padding: 24px;
    }
    
    .section-header {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: none;
      border: none;
      padding: 8px 0;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      color: #191B34;
      margin-bottom: 12px;
    }
    
    .section-content {
      display: none;
    }
    
    .section-content.open {
      display: block;
    }
    
    .form-group {
      margin-bottom: 16px;
    }
    
    .form-label {
      display: block;
      fontSize: 14px;
      font-weight: 500;
      color: #191B34;
      margin-bottom: 8px;
    }
    
    .form-input {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #656A86;
      border-radius: 4px;
      font-size: 14px;
      background-color: #FFFFFF;
      color: #191B34;
    }
    
    .circulation-banner {
      background-color: #1F3CD0;
      padding: 16px;
      border-radius: 4px;
      color: #FFFFFF;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      font-size: 14px;
    }
    
    .circulation-info {
      background-color: #EFF1F6;
      padding: 12px;
      border-radius: 4px;
      font-size: 14px;
      color: #656A86;
    }
    
    .editor-area {
      flex: 1;
      overflow-y: auto;
      background-color: #FFFFFF;
      padding: 24px 48px;
      position: relative;
    }
    
    .editor-toolbar {
      border-bottom: 1px solid #E0E3EE;
      padding-bottom: 12px;
      margin-bottom: 24px;
      display: flex;
      gap: 8px;
      align-items: center;
    }
    
    .article-title {
      font-size: 32px;
      font-weight: 500;
      color: #191B34;
      margin-bottom: 24px;
      line-height: 1.2;
    }
    
    .article-paragraph {
      font-size: 16px;
      color: #191B34;
      line-height: 1.6;
      margin: 0 0 24px 0;
    }
    
    .article-heading {
      font-size: 24px;
      font-weight: 600;
      color: #191B34;
      margin-bottom: 16px;
      line-height: 1.2;
    }
    
    .add-icon-area {
      position: relative;
      height: 24px;
      display: flex;
      align-items: center;
      cursor: pointer;
      margin-left: -48px;
      padding-left: 48px;
      margin-bottom: 0px;
    }
    
    .add-icon {
      position: absolute;
      left: 12px;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background-color: transparent;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      opacity: 0;
      transform: scale(0.8);
      z-index: 10;
    }
    
    .add-icon-area:hover .add-icon,
    .add-icon.active {
      background-color: #1F3CD0;
      opacity: 1;
      transform: scale(1);
    }
    
    .add-menu {
      position: absolute;
      left: 48px;
      top: 50%;
      transform: translateY(-50%);
      background-color: #FFFFFF;
      border: 1px solid #E0E3EE;
      border-radius: 8px;
      padding: 6px 8px;
      display: none;
      gap: 2px;
      align-items: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      flex-wrap: nowrap;
    }
    
    .add-menu.visible {
      display: flex;
    }
    
    .add-menu-icon {
      background: none;
      border: none;
      padding: 8px;
      cursor: pointer;
      color: #656A86;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      transition: background-color 0.2s;
    }
    
    .add-menu-icon:hover {
      background-color: #F8FAFD;
    }
    
    .add-menu-icon svg {
      width: 20px;
      height: 20px;
    }
    
    .event-placeholder {
      background-color: #EFF1F6;
      padding: 48px 24px;
      border-radius: 4px;
      margin-bottom: 24px;
      text-align: center;
      border: 1px solid #E0E3EE;
      font-size: 16px;
      font-weight: 500;
      color: #656A86;
    }
    
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }
    
    .modal-overlay.visible {
      display: flex;
    }
    
    .modal-content {
      background-color: #FFFFFF;
      width: 90vw;
      height: 90vh;
      border-radius: 8px;
      display: flex;
      overflow: hidden;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    }
    
    .modal-sidebar {
      width: 240px;
      background-color: #F8FAFD;
      border-right: 1px solid #E0E3EE;
      padding: 24px;
      overflow-y: auto;
    }
    
    .modal-main {
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    
    .modal-header {
      padding: 24px;
      border-bottom: 1px solid #E0E3EE;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .event-list {
      flex: 1;
      overflow-y: auto;
    }
    
    .event-item {
      display: grid;
      grid-template-columns: 3fr 1.5fr 1.5fr 1.5fr;
      gap: 16px;
      padding: 24px;
      border-bottom: 1px solid #E0E3EE;
    }
    
    .event-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 8px;
      background-color: #D2FAD2;
      border: 1px solid #75E38A;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 500;
      color: #064E3F;
      margin-bottom: 12px;
    }
    
    .status-badge {
      padding: 4px 12px;
      color: #FFFFFF;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .status-published {
      background-color: #20A453;
    }
    
    .status-draft {
      background-color: #656A86;
    }
    
    .chevron {
      transition: transform 0.2s;
    }
    
    .chevron.rotated {
      transform: rotate(180deg);
    }
  </style>
</head>
<body>
  <div class="composer-container">
    <!-- Top Navigation -->
    <div class="top-nav">
      <div class="top-nav-left">
        <div class="logo-area">
          <div class="logo-circle"></div>
          <span style="font-size: 20px; font-weight: 500;">Composer</span>
        </div>
        <nav class="nav-links">
          <a href="#" class="nav-link">Stories</a>
          <a href="#" class="nav-link">Settings</a>
          <a href="#" class="nav-link">Templates</a>
        </nav>
      </div>
      <div class="top-nav-right">
        <div class="sandbox-badge">Sandbox</div>
        <span style="font-size: 14px;">Aaron Schmidt</span>
        <div class="user-avatar">AS</div>
      </div>
    </div>

    <!-- Sub Header -->
    <div class="sub-header">
      <div class="sub-header-left">
        <button class="btn-icon">←</button>
        <div>
          <div style="font-size: 16px; font-weight: 500; color: #191B34;">
            The 2021 Formula 1 World Championship: A Season Like No Other
          </div>
          <div style="font-size: 12px; color: #656A86; margin-top: 2px;">
            Saved 11/11/25 at 11:15 AM
          </div>
        </div>
      </div>
      <div class="sub-header-right">
        <button class="btn-icon">⚙</button>
        <button class="btn-icon">⋮</button>
        <button class="btn-icon">⛶</button>
        <button class="btn-icon">↗</button>
        <button class="btn btn-neutral">Draft ▼</button>
        <button class="btn btn-primary">Save</button>
        <button class="btn btn-publish">Publish</button>
      </div>
    </div>

    <!-- Tabs -->
    <div class="tabs-container">
      <button class="tab active">Planning</button>
      <button class="tab">Metadata</button>
      <button class="tab">Featured media</button>
      <button class="tab">Related items</button>
      <button class="tab">Variants</button>
      <button class="btn-icon">▼</button>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Left Sidebar -->
      <div class="left-sidebar">
        <!-- Circulations -->
        <div>
          <button class="section-header" onclick="toggleSection('circulations')">
            Circulations
            <span class="chevron" id="chevron-circulations">▼</span>
          </button>
          <div class="section-content open" id="section-circulations">
            <div class="form-group">
              <label class="form-label">Primary website <span style="color: #656A86;">(required)</span></label>
              <select class="form-input">
                <option>Adventure Awaits Updated</option>
              </select>
            </div>
            <div class="circulation-banner">
              <span>Circulated to 1 websites, and 1 sections</span>
              <button style="background: #FFFFFF; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 500; color: #1F3CD0;">
                Manage circulations
              </button>
            </div>
            <div class="circulation-info">
              <div style="margin-bottom: 8px;">
                <span style="font-weight: 500; color: #191B34;">Primary website</span>
                <div>Adventure Awaits Updated</div>
              </div>
              <div>
                <span style="font-weight: 500; color: #191B34;">Primary section</span>
                <div>news (News)</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Headlines -->
        <div style="margin-top: 24px;">
          <button class="section-header" onclick="toggleSection('headlines')">
            Headlines
            <span class="chevron" id="chevron-headlines">▼</span>
          </button>
          <div class="section-content open" id="section-headlines">
            <div class="form-group">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                <label class="form-label" style="margin-bottom: 0;">Working headline <span style="color: #656A86;">(required)</span></label>
                <span style="font-size: 12px; color: #656A86;">61/500 characters</span>
              </div>
              <input type="text" class="form-input" value="The 2021 Formula 1 World Championship: A Season Like No Other">
            </div>
            <div class="form-group">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                <label class="form-label" style="margin-bottom: 0;">Web</label>
                <span style="font-size: 12px; color: #656A86;">0/50 characters</span>
              </div>
              <input type="text" class="form-input" placeholder="Add web headline">
            </div>
          </div>
        </div>
      </div>

      <!-- Editor Area -->
      <div class="editor-area" id="editor-area">
        <div class="editor-toolbar">
          <button class="btn-icon">↶</button>
          <button class="btn-icon">↷</button>
          <div style="width: 1px; height: 24px; background-color: #E0E3EE; margin: 0 4px;"></div>
          <select style="padding: 6px 12px; border: 1px solid #E0E3EE; border-radius: 4px; font-size: 14px;">
            <option>Heading 3</option>
          </select>
          <button class="btn-icon"><strong>B</strong></button>
          <button class="btn-icon"><em>I</em></button>
          <button class="btn-icon"><u>U</u></button>
        </div>
        
        <div style="position: absolute; top: 24px; right: 48px; font-size: 12px;">
          <a href="#" style="color: #1F3CD0; text-decoration: none;">Back to old editor</a>
        </div>

        <div style="max-width: 800px;" id="article-content"></div>
      </div>
    </div>
  </div>

  <!-- Data Modal -->
  <div class="modal-overlay" id="data-modal">
    <div class="modal-content">
      <div class="modal-sidebar">
        <h3 style="font-size: 12px; font-weight: 600; color: #656A86; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 16px;">CONTENT TYPES</h3>
        <select class="form-input" style="margin-bottom: 24px;">
          <option>Events</option>
        </select>
        <h3 style="font-size: 12px; font-weight: 600; color: #656A86; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 16px;">SORT BY</h3>
        <select class="form-input">
          <option>Last updated date</option>
        </select>
      </div>
      <div class="modal-main">
        <div class="modal-header">
          <h2 style="font-size: 24px; font-weight: 600; color: #191B34; margin: 0;">Events</h2>
          <button class="btn-icon" onclick="closeDataModal()">×</button>
        </div>
        <div class="event-list" id="event-list"></div>
      </div>
    </div>
  </div>

  <script>
    // App State
    let articleBlocks = [
      { type: 'paragraph', text: 'The 2021 Formula 1 season was one of the most dramatic, controversial, and competitive in the sport\'s history. Two titans of the grid — Lewis Hamilton and Max Verstappen — went head-to-head in a year-long duel that captivated fans around the world.' },
      { type: 'heading', text: 'Early Season Battles' },
      { type: 'paragraph', text: 'From the opening round in Bahrain, it was clear that Red Bull and Mercedes were evenly matched. Verstappen took early poles, while Hamilton\'s experience and strategy kept him in contention. The two traded wins and exchanged the championship lead multiple times across the first half of the season.' },
      { type: 'heading', text: 'Tensions Rising' },
      { type: 'paragraph', text: 'By mid-season, their rivalry grew increasingly tense, highlighted by collisions at Silverstone and Monza that sent shockwaves through the paddock. Each incident added layers of controversy and rivalry, setting the stage for a nail-biting finish.' },
      { type: 'heading', text: 'Final Showdown in Abu Dhabi' },
      { type: 'paragraph', text: 'Entering the final race at Yas Marina, the two drivers were tied on points — a scenario unseen in decades. After a chaotic and controversial finish involving a late safety car and race control decisions, Max Verstappen claimed his first World Championship, passing Hamilton on the final lap.' },
      { type: 'heading', text: 'Aftermath and Legacy' },
      { type: 'paragraph', text: 'The aftermath was filled with debate, protests, and regulatory scrutiny, ultimately leading to major procedural changes for the following season. Still, the 2021 championship stands as a watershed moment in F1 history — a clash of generations, with blood-pumping brilliance and unforgettable drama.' }
    ];

    let activeMenuIndex = null;

    const events = [
      { title: "2025 National Race Championship", status: "PUBLISHED", category: "Sports", lastModified: "9/23/2025, 8:35 PM", published: "9/17/2025, 9:28 AM", author: "DHASHLAMON", hasEventbrite: true },
      { title: "Contemporary Art Gallery Opening Reception", status: "DRAFT", category: "Arts", lastModified: "9/16/2025, 10:38 PM", published: "--", author: "ARTCURATOR", hasEventbrite: false },
      { title: "Tech Innovation Summit 2025", status: "PUBLISHED", category: "Business", lastModified: "9/15/2025, 10:58 PM", published: "9/15/2025, 10:11 AM", author: "TECHWRITER", hasEventbrite: true },
      { title: "Community 5K Fun Run", status: "PUBLISHED", category: "Sports", lastModified: "10/18/2025, 3:22 PM", published: "10/15/2025, 9:45 AM", author: "EVENTCOORD", hasEventbrite: false }
    ];

    // Functions
    function toggleSection(section) {
      const content = document.getElementById(`section-${section}`);
      const chevron = document.getElementById(`chevron-${section}`);
      content.classList.toggle('open');
      chevron.classList.toggle('rotated');
    }

    function renderArticle() {
      const container = document.getElementById('article-content');
      container.innerHTML = '<h1 class="article-title">The 2021 Formula 1 World Championship: A Season Like No Other</h1>';
      
      articleBlocks.forEach((block, index) => {
        if (block.type === 'placeholder') {
          const div = document.createElement('div');
          div.className = 'event-placeholder';
          div.textContent = 'Event Placeholder';
          container.appendChild(div);
        } else if (block.type === 'heading') {
          const h2 = document.createElement('h2');
          h2.className = 'article-heading';
          h2.textContent = block.text;
          container.appendChild(h2);
        } else {
          const p = document.createElement('p');
          p.className = 'article-paragraph';
          p.innerHTML = block.text.replace(/Silverstone|Monza|Max Verstappen/g, '<strong>$&</strong>');
          container.appendChild(p);
        }
        
        // Add icon area between blocks
        if (index < articleBlocks.length - 1) {
          const addArea = document.createElement('div');
          addArea.className = 'add-icon-area';
          addArea.innerHTML = `
            <div class="add-icon" id="add-icon-${index}">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
            </div>
            <div class="add-menu" id="add-menu-${index}">
              <button class="add-menu-icon" title="Audio">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 18V5l12-2v13M9 13l12-2"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Video">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"/>
                  <line x1="7" y1="2" x2="7" y2="22"/>
                  <line x1="17" y1="2" x2="17" y2="22"/>
                  <line x1="2" y1="12" x2="22" y2="12"/>
                  <line x1="2" y1="7" x2="7" y2="7"/>
                  <line x1="2" y1="17" x2="7" y2="17"/>
                  <line x1="17" y1="17" x2="22" y2="17"/>
                  <line x1="17" y1="7" x2="22" y2="7"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Image">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                  <circle cx="8.5" cy="8.5" r="1.5"/>
                  <polyline points="21 15 16 10 5 21"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Share">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="18" cy="5" r="3"/>
                  <circle cx="6" cy="12" r="3"/>
                  <circle cx="18" cy="19" r="3"/>
                  <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/>
                  <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Annotations">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Calendar">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                  <line x1="16" y1="2" x2="16" y2="6"/>
                  <line x1="8" y1="2" x2="8" y2="6"/>
                  <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Comment">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Block">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="7" height="7"/>
                  <rect x="14" y="3" width="7" height="7"/>
                  <rect x="14" y="14" width="7" height="7"/>
                  <rect x="3" y="14" width="7" height="7"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Quote">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"/>
                  <path d="M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="List">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="8" y1="6" x2="21" y2="6"/>
                  <line x1="8" y1="12" x2="21" y2="12"/>
                  <line x1="8" y1="18" x2="21" y2="18"/>
                  <line x1="3" y1="6" x2="3.01" y2="6"/>
                  <line x1="3" y1="12" x2="3.01" y2="12"/>
                  <line x1="3" y1="18" x2="3.01" y2="18"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Code">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="16 18 22 12 16 6"/>
                  <polyline points="8 6 2 12 8 18"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Link">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="4 7 4 4 20 4 20 7"/>
                  <line x1="9" y1="20" x2="15" y2="20"/>
                  <line x1="12" y1="4" x2="12" y2="20"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Grid">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 3h7v7H3zM14 3h7v7h-7zM14 14h7v7h-7zM3 14h7v7H3z"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Divider">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Star">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Document">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                  <polyline points="14 2 14 8 20 8"/>
                  <line x1="16" y1="13" x2="8" y2="13"/>
                  <line x1="16" y1="17" x2="8" y2="17"/>
                  <polyline points="10 9 9 9 8 9"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Gallery">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                  <circle cx="8.5" cy="8.5" r="1.5"/>
                  <polyline points="21 15 16 10 5 21"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Navigation">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="22" y1="2" x2="11" y2="13"/>
                  <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Settings">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="3"/>
                  <path d="M12 1v6m0 6v6m9.66-9H15m-6 0H3m15.66 0L16 8.34M8.34 16 6 18.34m0-12.68L8.34 8M16 16l2.34 2.34"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Print">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="6 9 6 2 18 2 18 9"/>
                  <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/>
                  <rect x="6" y="14" width="12" height="8"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="News">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                  <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Edit">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/>
                </svg>
              </button>
              <button class="add-menu-icon" title="Chat">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                  <line x1="9" y1="10" x2="15" y2="10"/>
                  <line x1="12" y1="7" x2="12" y2="13"/>
                </svg>
              </button>
              <button class="add-menu-icon" onclick="openDataModal(${index})" title="Data">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <ellipse cx="12" cy="5" rx="9" ry="3"/>
                  <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/>
                  <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/>
                </svg>
              </button>
            </div>
          `;
          
          addArea.addEventListener('mouseenter', () => {
            document.getElementById(`add-icon-${index}`).classList.add('active');
          });
          
          addArea.addEventListener('mouseleave', () => {
            if (activeMenuIndex !== index) {
              document.getElementById(`add-icon-${index}`).classList.remove('active');
            }
          });
          
          const icon = addArea.querySelector('.add-icon');
          icon.addEventListener('click', () => toggleAddMenu(index));
          
          container.appendChild(addArea);
        }
      });
    }

    function toggleAddMenu(index) {
      // Close any open menu
      if (activeMenuIndex !== null && activeMenuIndex !== index) {
        document.getElementById(`add-menu-${activeMenuIndex}`).classList.remove('visible');
        document.getElementById(`add-icon-${activeMenuIndex}`).classList.remove('active');
      }
      
      // Toggle current menu
      const menu = document.getElementById(`add-menu-${index}`);
      menu.classList.toggle('visible');
      activeMenuIndex = menu.classList.contains('visible') ? index : null;
    }

    function openDataModal(index) {
      activeMenuIndex = index;
      document.getElementById('data-modal').classList.add('visible');
      renderEventList();
    }

    function closeDataModal() {
      document.getElementById('data-modal').classList.remove('visible');
    }

    function renderEventList() {
      const container = document.getElementById('event-list');
      container.innerHTML = '';
      
      events.forEach((event, i) => {
        const item = document.createElement('div');
        item.className = 'event-item';
        item.innerHTML = `
          <div>
            <div style="font-size: 18px; font-weight: 600; color: #191B34; margin-bottom: 8px;">${event.title}</div>
            ${event.hasEventbrite ? '<div class="event-badge">✓ Eventbrite</div>' : ''}
            <div style="display: flex; gap: 8px; align-items: center; margin-top: 12px;">
              <span style="font-size: 14px; color: #656A86;">Workflow status</span>
              <span class="status-badge ${event.status === 'PUBLISHED' ? 'status-published' : 'status-draft'}">${event.status}</span>
              <span style="padding: 4px 12px; background-color: #FFFFFF; border: 1px solid #E0E3EE; color: #191B34; border-radius: 4px; font-size: 12px; font-weight: 500;">${event.category}</span>
            </div>
            <div style="display: flex; gap: 12px; margin-top: 12px;">
              <button class="btn btn-primary" onclick="selectEvent(${i})">Select</button>
              <button class="btn btn-neutral">Preview</button>
              <button class="btn btn-neutral">Edit</button>
            </div>
          </div>
          <div style="font-size: 14px; color: #191B34;">${event.lastModified}</div>
          <div style="font-size: 14px; color: #191B34;">${event.published}</div>
          <div style="font-size: 14px; color: #656A86;">${event.author}</div>
        `;
        container.appendChild(item);
      });
    }

    function selectEvent(eventIndex) {
      if (activeMenuIndex !== null) {
        articleBlocks.splice(activeMenuIndex + 1, 0, { type: 'placeholder', event: events[eventIndex] });
        closeDataModal();
        renderArticle();
      }
    }

    // Close menu when clicking outside
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.add-menu') && !e.target.closest('.add-icon')) {
        if (activeMenuIndex !== null) {
          const menu = document.getElementById(`add-menu-${activeMenuIndex}`);
          if (menu) {
            menu.classList.remove('visible');
            document.getElementById(`add-icon-${activeMenuIndex}`).classList.remove('active');
          }
          activeMenuIndex = null;
        }
      }
    });

    // Initialize
    renderArticle();
  </script>
</body>
</html>